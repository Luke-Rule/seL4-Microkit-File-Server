<?xml version="1.0" encoding="UTF-8"?>
<system>
     <!-- File Server Memory Regions -->
    <memory_region name="file_table" size="0x10000" />
    <memory_region name="file_data" size="0x100000" />

    <!-- File Server Protection Domain -->
    <protection_domain name="file_server" priority="1" >
        <program_image path="file_server.elf"/>

        <map mr="file_table" vaddr="0x1000" perms="rw" cached="true"
          setvar_vaddr="file_table_base"/>
        <map mr="file_data" vaddr="0x11000" perms="rw" cached="true"
          setvar_vaddr="file_data_base"/>
        <map mr="client_buffer_0" vaddr="0x111000" perms="rw" cached="false"
          setvar_vaddr="lowest_client_buffer_base"/>

    </protection_domain>

     <!-- Client Memory Regions -->
    <memory_region name="client_buffer_0" size="0x1000" />

    <!-- Client Protection Domains -->
    <protection_domain name="client_0" priority="0" >
        <program_image path="fs_tests.elf"/>
        <map mr="client_buffer_0" vaddr="0x0" perms="rw" cached="false"
          setvar_vaddr="file_server_buffer_base"/>
    </protection_domain>


    <!-- Communication Channels -->
    <channel>
        <end pd="file_server" id="0"/>
        <end pd="client_0" id="0" pp="true"/>
    </channel>
</system>
