<?xml version="1.0" encoding="UTF-8"?>
<system>
     <!-- File Server Memory Regions -->
    <memory_region name="block_table" size="0x4000" />
    <memory_region name="blocks" size="0x1F3FC000" />
    <memory_region name="file_descriptor_table" size="0x10000" />

    <!-- File Server Protection Domain -->
    <protection_domain name="file_server" priority="1" >
        <program_image path="file_server_dynamic.elf"/>

        <map mr="block_table" vaddr="0x4000000" perms="rw" cached="true"
          setvar_vaddr="block_table_base"/>
        <map mr="blocks" vaddr="0x4004000" perms="rw" cached="true"
          setvar_vaddr="blocks_base"/>
        <map mr="file_descriptor_table" vaddr="0x24004000" perms="rw" cached="true"
          setvar_vaddr="file_descriptor_table_base"/>
        <map mr="client_buffer_0" vaddr="0x24014000" perms="rw" cached="false"
          setvar_vaddr="lowest_client_buffer_base"/>

    </protection_domain>

     <!-- Client Memory Regions -->
    <memory_region name="client_buffer_0" size="0x40000" />

    <!-- Client Protection Domains -->
    <protection_domain name="client_0" priority="0" >
        <program_image path="fs_tests.elf"/>
        <map mr="client_buffer_0" vaddr="0x0" perms="rw" cached="false"
          setvar_vaddr="file_server_buffer_base"/>
    </protection_domain>


    <!-- Communication Channels -->
    <channel>
        <end pd="file_server" id="0"/>
        <end pd="client_0" id="0" pp="true"/>
    </channel>
</system>
